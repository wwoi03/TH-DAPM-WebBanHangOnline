@using TH_DAPM_WebBanHangOnline.Models.ViewModel
@{
	Layout = "~/Views/Shared/_CustomerLayout.cshtml";
	var listOrder = ViewBag.listOrder;
	var listOrderDetails = ViewBag.listOrderDetails;
	var i = 1;
}

<!-- Cart Start -->
<div class="container-fluid pt-5">
	<div class="row px-xl-5">
		<div class="col-lg-8 table-responsive mb-5">
			<table class="table table-bordered text-center mb-0">
				<thead class="bg-secondary text-dark">
					<tr>
						<th>STT</th>
						<th>Ngày đặt hàng</th>
						<th>Mã đơn hàng</th>
						<th>Tên người nhận</th>
						<th>Tổng tiền</th>
						<th>Trạng thái</th>
						<th></th>
					</tr>
				</thead>
				<tbody class="align-middle">
					@foreach (var item in listOrder)
					{
						<tr>
							<td class="align-middle">@(i++)</td>
							<td class="align-middle">@item.OrderDay.ToString("dd/MM/yyyy")</td>
							<td class="align-middle">@item.OrderId</td>
							<td class="align-middle">@item.RecipientName</td>
							<td class="align-middle">@item.Total</td>
							<td class="align-middle">@item.Status</td>
							<td class="align-middle">
								<a asp-controller="OrderCustomer" asp-action="Details" asp-route-orderId="@item.OrderId" class="btn btn-sm">
									<i class="fas fa-eye text-primary mr-1"></i>
								</a>
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
		<div class="col-lg-4">
			<!-- Chi tiết -->
			@if (listOrderDetails != null)
			{
				<div class="card border-secondary mb-5">
					<div class="card-header bg-secondary border-0">
						<h4 class="font-weight-semi-bold m-0">Order Total</h4>
					</div>

					<div class="card-body">
						<!-- danh sách sản phẩm -->
						<h5 class="font-weight-medium mb-3">Sản phẩm</h5>

						@foreach (var item in listOrderDetails)
						{
							<a style="color: #6F6F6F" asp-controller="HomeCustomer" asp-action="ProductDetails" asp-route-productId="@item.ProductId" class="d-flex justify-content-between">
								<p>@item.Product.Name (x@(item.Quantity))</p>
								<p>$@item.Total</p>
							</a>
						}

						<!-- Thông tin nhận -->
						<hr class="mt-0">

						<h5 class="font-weight-medium mb-3">Thông tin nhận hàng</h5>

						<div class="d-flex justify-content-between">
							<p>Tên người nhận</p>
							<p>@listOrderDetails[0].Order.RecipientName</p>
						</div>

						<div class="d-flex justify-content-between">
							<p>Số điện thoại</p>
							<p>@listOrderDetails[0].Order.Phone</p>
						</div>

						<div class="d-flex justify-content-between">
							<p>Địa chỉ nhận hàng</p>
							<p>@listOrderDetails[0].Order.AddressDeliverry</p>
						</div>

						<div class="d-flex justify-content-between">
							<p>Ngày đặt hàng</p>
							<p>@listOrderDetails[0].Order.OrderDay.ToString("dd/MM/yyyy")</p>
						</div>

						<div class="d-flex justify-content-between">
							<p>Trạng thái</p>
							<strong>@listOrderDetails[0].Order.Status</strong>
						</div>

						<!-- Tổng tiền -->
						<hr class="mt-0">
						<div class="d-flex justify-content-between mb-3 pt-1">
							<h6 class="font-weight-medium">Tổng phụ</h6>
							<h6 class="font-weight-medium">$@listOrderDetails[0].Order.Total</h6>
						</div>

						<div class="d-flex justify-content-between">
							<h6 class="font-weight-medium">Phí giao hàng</h6>
							<h6 class="font-weight-medium">$0</h6>
						</div>
					</div>

					<div class="card-footer border-secondary bg-transparent">
						<div class="d-flex justify-content-between mt-2">
							<h5 class="font-weight-bold">Tổng tiền</h5>
							<h5 class="font-weight-bold">$@listOrderDetails[0].Order.Total</h5>
						</div>
					</div>
				</div>
			}
		</div>
	</div>
</div>

<script src="/js/Cart.js"></script>
<!-- Cart End -->